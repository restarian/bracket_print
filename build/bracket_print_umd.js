/* Bracket Print resides under the LGPL v3 Copyright (c) 2020 Robert Steckroth, Bust0ut <RobertSteckroth@gmail.com>

Bracket print is a printing and logging tool for javascript engines which supplies literal ECMA Object serialization.

 this file is a part of Bracket Print

 Bracket Print is free software: you can redistribute it and/or modify it under the terms of the GNU LESSER GENERAL PUBLIC LICENSE as published by
the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
 Bracket Print is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
You should have received a copy of the GNU General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>. */

/* Generated by Brace_UMD 0.8.10 */
if("function"!=typeof t)var t=require("amdefine")(module);t(["./proto_object","./style_map"],function(t,e){var i=function(){var t;if(!(this instanceof(t=i)))return new(Array.prototype.slice.call(arguments).reduce(function(t,e){return t=t.bind(t.prototype,e)},t));this._is_chained=!0,this.option(arguments),this._is_chained=!1,this._last_command=null,this._apply_arguments=[],this._plain_index=[],this._formated_index=[],this.formated="",this.plain=""};return i.prototype=t,i.prototype.parent=i,t.style_map=e,t.__defineGetter__("currentPlatform",function(){return"object"!=typeof this.style_map[this.platform]||null===this.style_map[this.platform]?(this._is_error||new this.parent({_is_error:!0},this,{style:!1,platform:"none",log_title:"Bracket Print Error",level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log("The requested platform",this.platform,"is not included in the style mapping."),null):this.style_map[this.platform]}),t.__defineGetter__("currentTheme",function(){var t,e;if(!(t=this.currentPlatform))return null;var i=this.platform;if(t.import_theme_from){if(!t.import_theme_from in this.style_map)return this._is_error||new this.parent({_is_error:!0},this,{style:!1,log_title:"Bracket Print Error",level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log("The requested import theme",currentPlatform.import_theme_from,"is not included in the style mapping in platform",i),null;e=this.style_map[t.import_theme_from].theme,i=t.import_theme_from}else e=t.theme;if("object"!=typeof e)return this._is_error||new this.parent({_is_error:!0},this,{style:!1,log_title:"Bracket Print Error",level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log("The theme",this.theme,"is not found in the platform",i),null;if(this.theme+"_"+this.level in e)e=e[this.theme+"_"+this.level];else{if(!("default_theme"in t))return this._is_error||new this.parent({_is_error:!0},this,{style:!1,log_title:"Bracket Print Error",level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log("The theme",t.default_theme,"specified is not found in the",i,"style mapping."),null;if(!(t.default_theme in e))return this._is_error||new this.parent({_is_error:!0},this,{style:!1,log_title:"Bracket Print Error",level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log("The default theme",t.default_theme,"specified is not found in the",i,"style mapping."),null;e=e[t.default_theme]}return"object"!=typeof e?(this._is_error||new this.parent({_is_error:!0},this,{style:!1,log_title:"Bracket Print Error",level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log("The theme specified is not found in the",i,"style mapping."),null):e}),t.remove_call=function(){this.currentPlatform.format&&this.currentPlatform.format.length>=3&&this._apply_arguments.splice.apply(this._apply_arguments,arguments);var t=this._formated_index.splice.apply(this._formated_index,arguments)[0]||0,e=this._plain_index.splice.apply(this._plain_index,arguments)[0]||0;return this.formated=this.formated.substr(0,t),this.plain=this.plain.substr(0,e),null},t.append_string=function(t,e){if(this.plain.length===this.character_limit)return!1;if(!arguments.length)return!0;var i="string"==typeof e&&e||e+"";if(!i)return!0;var r=" <..output truncated>";if(r=this.character_limit>3*r.length&&r||"",this.plain.length+i.length>this.character_limit-r.length&&(i=i.substr(0,this.character_limit-this.plain.length-r.length)+r),this.plain.length>=this.character_limit)return!1;if(this._plain_index.push(this.plain.length),this.plain+=i,this.style){var l,n;if(!(n=this.currentTheme)||!(l=this.currentPlatform))return"";this._formated_index.push(this.formated.length);var s;if(!(s=t in n&&n[t]||n.base))return new this.parent(this,{style:!1,log_title:"Bracket Print Error",level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log_true("There is not a style value set for",t,"in platform",this.platform);this.formated+=l.format(s,i,l.format.length>=3&&this._apply_arguments||void 0)}else if(this.formated.length){var n=this.currentTheme||{},l=this.currentPlatform||{};this.formated+=(n.close_with||l.close_with||"")+i+(n.open_with||l.open_with||"")}else this.formated+=i;return!0},i});