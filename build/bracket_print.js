/* Copyright (c) 2020 Robert Steckroth, Bust0ut <RobertSteckroth@gmail.com> Bracket Print resides under the LGPL version 3
Bracket Print is a cross-platform printing and logging tool for javascript engines which supplies literal ECMA Object serialization.

Bracket Print is free software: you can redistribute it and/or modify it under the terms of the GNU LESSER GENERAL PUBLIC LICENSE as published by
the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

Bracket Print is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
You should have received a copy of the GNU General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>. */

define("serializer",[],function(){return function(t,e,i,n,r){var s,o="",a=this.style_map[this.platform].denote_line||"\n",l=this.style_map[this.platform].denote_space||" ",h=this.style_map[this.platform].denote_tab||"\t";if("number"==typeof n&&this._cache||(this._cache=[]),e="string"==typeof e&&e||l+l,i=i||"",this.compression>3?(e="",s=""):3===this.compression?(e="",s=l,o=l):(this.compression,s=l,o=a),t instanceof this.parent)this.append_string("string",t);else if(null===t)this.append_string("null","null");else if("boolean"==typeof t)this.append_string("boolean",t);else if(t!==t)this.append_string("nan","NaN");else if(t instanceof Error){var p=t.stack.split(/\r\n|\n/).slice(1).map(function(t){return t.replace(/^\s*/,this.compression<4&&i+e||" ")},this);this.append_string("namespace","Error"),this.append_string("colon",":"+s),this.append_string("string",i+t.message+o),this.append_string("function_body",p.join(o))}else if(void 0===t)this.append_string("undefined","undefined");else if((!this.enumerate_all||this.value_buffer)&&"undefined"!=typeof Buffer&&t instanceof Buffer)this.append_string("string",t.toString());else if(/object|function/.test(typeof t)){if(!this.append_string())return;var _=!1,c=!this.enumerate_all&&Object.keys||Object.getOwnPropertyNames;n=n||0,this._cache[n]=this._cache[n]||[],this._cache[n].push(t);for(var m=0;m<n;m++)for(var f=0;f<this._cache[m].length;f++)if("object"==typeof t&&t===this._cache[m][f]){if(this.append_string("function_body","CIRCULAR DUPLICATE"+s),this.append_string("colon",">"+s),this.append_string("namespace","Object"),!this.append_string("parenthesis","("))return!1;for(var u=0,d=Object.keys(this._cache[m][f]),g=0;g<d.length;g++){if(u+=d[g].length+3,this.append_string("string",d[g]),u>50){this.append_string("string",", ..");break}this.append_string("comma",", ")}return this.append_string("parenthesis",")")}"function"==typeof t.valueOf&&t.valueOf()!==t&&(_=!0);var b=t instanceof Array,v=!1,y="{";if("function"==typeof t){v=!0;var j,O,w,I,k,q=!1;f_msg=t.toString();var T=f_msg.match(/^\s*([^\(]*)/);T&&(O=T[1]),O?(j=f_msg.match(/(\S+)\s*([^\(]*)\(([^\)]*)\)\s*\{((?:.|[\n,\r\n])*)\}/im),q=!0,O=j[1],w=j[2].replace(/\s+$/,""),I=j[3],k=j[4]):(j=f_msg.match(/\ *([^\=]*)\s*\=\>\s*([\{,\(]{0,1})((?:.|[\n,\r\n])*)/im),O="arrow",q=/^\s*\(/.test(j[1]),I=j[1].replace(/^\s*\(\s*/,"").replace(/\s*\)\s*$/,""),y=j[2],k="{"===y?j[3].replace(/\}\s*$/g,""):j[3].replace(/\)\s*$/g,"")),"arrow"!==O&&this.append_string("namespace",O),w&&this.append_string("string",l+w);var $=I.replace(/\t/g,"").replace(/ *, */g,",").replace(/\s*$/,"").split(",");if(q&&this.append_string("parenthesis","("+($[0]&&this.compression<3&&l||"")),$.forEach(function(t){this.append_string("parameter",t),this.append_string("comma",","+s)},this),$.length&&this.remove_call(-1),q&&this.append_string("parenthesis",($[0]&&this.compression<3&&l||"")+")"+(this.compression<5&&l||"")),"arrow"==O&&this.append_string("parameter","=>"+(this.compression<5&&l||"")),"("===y?this.append_string("parenthesis","("+("("!==y&&4===this.compression&&l||"")):this.append_string("bracket","{"+(4===this.compression&&l||"")),"("!==y&&this.truncate_function)this.append_string("function_body",(this.compression<4&&l||"")+"..."+(this.compression<3&&a||this.compression<5&&l||""));else{var E=1/0,S=1/0;this.shift_function_body&&k.replace(/^[^(?:\n|\r\n)]+/,"").replace(/^(\s+)\S+.*$/gm,function(t,e){E=Math.min((e.match(/\t/g)||[]).length,E),S=Math.min((e.match(/ /g)||[]).length,S)}),"("!==y&&(this.compression>2?(k=k.replace(/^\s*/,"").replace(/\s*$/,""),3===this.compression&&this.append_string("indent",a)):(k=k.replace(/^\s*(?:\n|\r\n|\r)/,"").replace(/\s*$/,""),this.append_string("indent",a)));var P=!0;k=k.replace(/^(\s*)(\S+.*$)/gm,function(t,n,r){if(P||this.append_string("indent",a),P=!1,n=n.replace(/[^(?:\n|\r\n)]*(?:\n|\r\n)/g,function(){return this.append_string("indent",a),""}.bind(this)),r){r=r.replace(/\s*$/,"");var s=E,o=S;this.shift_function_body&&(n=n.replace(/\t/g,function(t){return s-- >0?"":t}),n=n.replace(/ /g,function(t){return o-- >0?"":t})),"\t"!==a&&(n=n.replace(/\t/g,h))," "!==l&&(n=n.replace(/ /g,l)),/^\n$|^\r\n$/.test(a)||(n=n.replace(/\n|\r\n|\r/g,a))}return"("!==y&&this.shift_function_body&&this.append_string("indent",i+e),n&&this.append_string("indent",n),r&&this.append_string("function_body",r),""}.bind(this)),P||"("===y||(this.compression<4?this.append_string("indent",a):4===this.compression&&this.append_string("indent",l))}}else this.append_string(b&&"brace"||"bracket",b&&"["||"{"+(this.compression<3&&l||""));var z=c(t);if(!z.length){if("object"==typeof t.__proto__&&c(t.__proto__).length&&(this.append_string("indent",o+i+e),this._serializer("__proto__",void 0,void 0,n,!0),this.append_string("colon",":"+s),!this._serializer(t.__proto__,e,i+e,n+1)))return!1;if(_){if(this.append_string("indent",o+i+e),this.append_string("namespace","PRIMITIVE VALUE"+s),this.append_string("colon",">"+s),!this._serializer(t.valueOf(),e,i+e,n+1))return!1;if(this.append_string("comma",","+s),void 0!==t.length){if(this.append_string("indent",o+i+e),this.append_string("string","length"),this.append_string("colon",":"+s),!this._serializer(t.length,e,i+e,n+1))return!1;this.append_string("comma",","+s)}this.remove_call(-1)}this.append_string("indent",(!v&&this.compression<3&&o||"")+("("!==y&&i||"")),v?"("===y?this.append_string("parenthesis",")"):this.append_string("bracket","}"):this.append_string(b&&"brace"||"bracket",b&&"]"||"}"),this.append_string("comma",","+s)}for(var x=!1,B=1;B<z.length+1;B++){var A=z[B-1];if(!/^callee$|^caller$|^arguments$/.test(A)){if(!this.append_string())return!1;var R=x;if(x=!("object"!=typeof t[A]||null===t[A]||void 0===t[A]||!c(t[A]).length),1===this.compression?this.append_string("indent",o+i+e):2===this.compression&&(1===B||x||R)&&this.append_string("indent",o+i+e),1===B&&"function"==typeof t.valueOf&&t.valueOf()!==t){if(this.append_string("function_body","PRIMITIVE VALUE"+s),this.append_string("colon",">"+s),!this._serializer(t.valueOf(),e,i+e,n+1))return!1;this.append_string("comma",","+s),this.compression<3&&this.append_string("indent",o+i+e)}if(!b){if(!this._serializer(A,void 0,void 0,n,!0))return!1;this.append_string("colon",":"+s)}if(n<this.depth_limit-1||!x){if(!this._serializer(t[A],e,i+e,n+1))return!1}else{var V=c(t[A]).length;this.append_string("function_body","OBJECT WITH "+V+" PROPERT"+(1===V&&"Y"||"IES"))}if(this.append_string("comma",","+s),B===z.length){if(_&&void 0!==t.length){if(this.compression<2&&this.append_string("indent",o+i+e),this._serializer("length",void 0,void 0,n,!0),this.append_string("colon",":"+s),!this._serializer(t.length,e,i+e,n+1))return!1;this.append_string("comma",","+s)}if(this.remove_call(-1),t.__proto__&&"object"==typeof t.__proto__&&Object.keys(t.__proto__).length&&(this.append_string("comma",","+s),this.append_string("indent",o+i+e),this._serializer("__proto__",void 0,void 0,n,!0),this.append_string("colon",":"+s),!this._serializer(t.__proto__,e,i+e,n+1)))return!1;this.append_string("indent",(this.compression<3&&o||"")+i),this.append_string(b&&"brace"||"bracket",b&&"]"||"}"),this.append_string("comma",","+s)}}}this.remove_call(-1)}else if("number"==typeof t)this.append_string("number",t);else if("string"==typeof t){var M=/\S/.test(this.denote_quoting);this._cache.length?((M&&!r||this.quote_qualifier)&&this.append_string("quote",this.denote_quoting),this.append_string("string",M&&this.ensure_escape&&t.replace(RegExp("([^\\\\])"+this.denote_quoting,"g"),"$1\\"+this.denote_quoting)||t),(M&&!r||this.quote_qualifier)&&this.append_string("quote",this.denote_quoting)):this.append_string("string",t)}else this.append_string("namespace",t);return this._cache.length&&"number"!=typeof n&&(this._cache=[]),!0}}),define("proto_object",["./serializer","brace_option"],function(t,e){var i=e({style:!0,title:!0,log_title:"",title_stamp:function(){return new Date},auto_hyphen_title:!0,theme:"light",compression:2,get log_output(){return this._log_output},set log_output(t){if("function"==typeof t)return this._log_output=t;this._is_error||new this.parent({_is_error:!0},this,{log_title:"Bracket Print Error",character_limit:300,level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log_undefined("The value set to log_option is not of the type function. Value attempted to be set was:",t)},platform:("function"==typeof require&&!1===require.isBrowser||"object"==typeof module&&"object"==typeof module.exports)&&"terminal"||"browser",indentation_string:"   ",depth_limit:800,character_limit:Math.pow(2,25),style_character_limit:Math.pow(2,28),truncated_string:" <..output truncated>",truncate_function:!1,shift_function_body:!0,enumerate_all:!1,ensure_escape:!0,value_buffer:!0,denote_quoting:'"',quote_qualifier:!1,level:1,internal_level:!1,get log_level(){return this._log_level},set log_level(t){if("all"===t||""===t)return this._log_level=[-1/0,1/0];"[object Array]"===Object.prototype.toString.call(t)?t.length%2&&t.pop():t=[t];var e=[];t.join("-").replace(/\ +/g,"").replace(/\-\-([^\-]{1})/g,"-minus$1").replace(/^\-/,"minus").split(",").forEach(function(t){if(t){var i=t.split("-");i.length<2&&i.push(i[0]);for(var n=0;n<i.length;n+=2){var r=/minus/.test(i[0]),s=/minus/.test(i[1]);if(/Infinity/.test(i[n])?i[n]=1/0:i[n]=parseInt(i[n].replace(/minus/,"")),/Infinity/.test(i[n])?i[n+1]=1/0:i[n+1]=parseInt(i[n+1].replace(/minus/,"")),i[n]!==i[n]||i[n+1]!==i[n+1])return void(this._is_error||new this.parent({_is_error:!0},this,{log_title:"Bracket Print Error",character_limit:300,level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log("The value set to log_level can not be parsed as an integer:",i));r&&(i[n]*=-1),s&&(i[n+1]*=-1)}e=e.concat(i)}},this),this._log_level=e}});return i.add_qualifier("log_level","_log_level"),i.add_qualifier("log_output","_log_output"),i.extend({_serializer:t,_log_level:[-1/0,1/0],_log_output:function(t){console.log.apply(console,t)},toStyleString:function(){var t=this.formated,e=this;arguments.length?(e=this._print_command(e._last_command).apply(e,arguments),t=e.formated):(e.setPlatform(),e.setTheme());var i="";if(e._has_open&&e.setTheme()){var i="",n="theme_override"in e._platform&&e._platform.theme_override[e.theme+"_"+e.level];null===n||"object"!=typeof n?i=e._theme.wrap_end||"":"wrap_end"in n&&(i=n.wrap_end||""),i=i||e._platform.wrap_end||""}return t+i},toString:function(){var t=this.plain;return arguments.length&&(t=this._print_command(this._last_command).apply(this,arguments).plain),t},option:function(){var t=this._is_chained&&this||new this.parent(this),e=!1,i=function(t){for(var n,r=0;r<t.length;r++)if("[object Arguments]"===Object.prototype.toString.call(t[r]))i(t[r]);else if("object"==typeof t[r]||"string"==typeof t[r])if("string"==typeof(n=t[r]))e=!0,this.log_title=n;else{"_is_error"in n&&(this._is_error=n._is_error,delete n._is_error);for(var s in n)s in this.list()?"log_title"===s&&e||(this[s]=n[s]):this._is_error||n instanceof this.parent||new this.parent({_is_error:!0},this,{log_title:"Bracket Print Error",character_limit:300,level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).s("Option",s,"is not a Bracket Print option. Reference the Brace Option module for option configurations.").line(Object.keys(this.list())).log()}else if(!this._is_error){new this.parent({_is_error:!0},this,{log_title:"Bracket Print Error",character_limit:300,level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log("The parameter passed in to option",typeof t[r],t[r],"is not accepted. See docs for more information.");continue}}.bind(t);return i(arguments),t},spawn:function(){return new this.parent(this,arguments)},get empty(){return function(){return this.remove_call(0),this.option.apply(this,arguments)}.bind(this)},get s(){return this._print_command("space")},get space(){return this._print_command("space")},get tab(){return this._print_command("tab")},get t(){return this._print_command("tab")},get line(){return this._print_command("line")},get l(){return this._print_command("line")},get add(){return this._print_command("add")},get a(){return this._print_command("add")},_print_command:function(t){var e=this._is_chained&&this||new this.parent(this);return e._is_chained=!0,e._last_command=t,function(){if(!this.setPlatform())return this;if(this.style){if(!this._has_open&&this.setTheme()){var t="";if(this._theme){var e="theme_override"in this._platform&&this._platform.theme_override[this.theme+"_"+this.level];null===e||"object"!=typeof e?t=this._theme.wrap_start||"":"wrap_start"in e&&(t=e.wrap_start||""),t=t||this._platform.wrap_start||"",this.formated+=t}this._has_open=!0}}else{if(this._has_open&&this.setTheme()){var i="",e="theme_override"in this._platform&&this._platform.theme_override[this.theme+"_"+this.level];null===e||"object"!=typeof e?i=this._theme.wrap_end||"":"wrap_end"in e&&(i=e.wrap_end||""),i=i||this._platform.wrap_end||"",this.formated+=i}this._has_open=!1}if(!arguments.length)return this;for(var n=0;n<this.log_level.length;n+=2)if(parseInt(this.level)>=this.log_level[n]&&parseInt(this.level)<=this.log_level[n+1])return this._chain.apply(this,arguments);return this}.bind(e)},get _chain(){return function(){var t=this.indentation_string;"\t"!==this._platform.denote_tab&&(t=t.replace(/\t/g,this._platform.denote_tab)),/^\n$|^\r\n$|^\r$/.test(this._platform.denote_line)||(t=t.replace(/\r\n|\n|\r/g,this._platform.denote_line))," "!==this._platform.denote_space&&(t=t.replace(/ /g,this._platform.denote_space));for(var e=0;e<arguments.length&&(this.plain.length&&void 0!==this._platform["denote_"+this._last_command]&&(this.plain+=this._platform["denote_"+this._last_command],this.formated+=this._platform["denote_"+this._last_command]),this._serializer(arguments[e],t));e++);return this}},_title:function(){var t="";if(this.title){var e="function"==typeof this.title_stamp&&this.title_stamp()||"string"==typeof this.title_stamp&&this.title_stamp||"";t="["+(this.log_title||"")+(this.auto_hyphen_title&&this.log_title&&e&&" - "||"")+e+"] "}return t},get log(){var t=this._is_chained&&this||new this.parent(this);return t._is_chained=!0,function(){for(var t=!1,e=0;e<this.log_level.length;e+=2)if(this.level>=this.log_level[e]&&this.level<=this.log_level[e+1]){t=!0;break}if(!t)return this;if(arguments.length>0?this[this._last_command].apply(this,arguments):(this.setPlatform(),this.setTheme()),this.style){var i="",n=[];this.title&&(i=this._platform.format(this._theme.title||this._theme.base||"",this._title(),this._platform.format.length>=3&&n||void 0)),this.log_output([i+this.toStyleString()].concat(n.concat(this._apply_arguments)))}else this.log_output([this._title()+this.plain]);return this}.bind(t)},get log_false(){return function(){return this.log.apply(this,arguments),!1}.bind(this)},get log_true(){return function(){return this.log.apply(this,arguments),!0}.bind(this)},get log_undefined(){return function(){this.log.apply(this,arguments)}.bind(this)},get log_null(){return function(){return this.log.apply(this,arguments),null}.bind(this)},get log_nan(){return function(){return this.log.apply(this,arguments),NaN}.bind(this)},get log_empty(){return function(){return this.log.apply(this,arguments),""}.bind(this)},get log_N9(){return function(){return this.log.apply(this,arguments),-9}.bind(this)},get log_N8(){return function(){return this.log.apply(this,arguments),-8}.bind(this)},get log_N7(){return function(){return this.log.apply(this,arguments),-7}.bind(this)},get log_N6(){return function(){return this.log.apply(this,arguments),-6}.bind(this)},get log_N5(){return function(){return this.log.apply(this,arguments),-5}.bind(this)},get log_N4(){return function(){return this.log.apply(this,arguments),-4}.bind(this)},get log_N3(){return function(){return this.log.apply(this,arguments),-3}.bind(this)},get log_N2(){return function(){return this.log.apply(this,arguments),-2}.bind(this)},get log_N1(){return function(){return this.log.apply(this,arguments),-1}.bind(this)},get log_0(){return function(){return this.log.apply(this,arguments),0}.bind(this)},get log_N0(){return function(){return this.log.apply(this,arguments),0}.bind(this)},get log_1(){return function(){return this.log.apply(this,arguments),1}.bind(this)},get log_2(){return function(){return this.log.apply(this,arguments),2}.bind(this)},get log_3(){return function(){return this.log.apply(this,arguments),3}.bind(this)},get log_4(){return function(){return this.log.apply(this,arguments),4}.bind(this)},get log_5(){return function(){return this.log.apply(this,arguments),5}.bind(this)},get log_6(){return function(){return this.log.apply(this,arguments),6}.bind(this)},get log_7(){return function(){return this.log.apply(this,arguments),7}.bind(this)},get log_8(){return function(){return this.log.apply(this,arguments),8}.bind(this)},get log_9(){return function(){return this.log.apply(this,arguments),9}.bind(this)}})}),define("style_map",[],function(){return{browser:{denote_line:"\n",denote_tab:"\t;",denote_space:" ",denote_add:"",import_theme_from:"html",theme_override:{light_2:{wrap_start:"",wrap_end:""},dark_2:{wrap_start:"",wrap_end:""}},default_theme:"light_1",format:function(t,e,i){return i.push(t),"%c"+e}},html:{denote_line:"<br>",denote_tab:"&#09;",denote_space:"&nbsp;",denote_add:"",default_theme:"light_1",format:function(t,e){return"<span style='"+t+";'>"+e+"</span>"},theme:{light_1:{base:"color: grey",quote:"color: #454343;",number:"color: green",string:"color: #b91db3",function_body:"color: #656565",nan:"color: #8b3c00",null:"color: #1ca89d",boolean:"color: red",comma:"color: #323232",undefined:"color: #9ea41c",scope_container:"color: #286f4f",colon:"color: #363533",namespace:"color: #690900",indent:"color: #0f0211",title:"color: #262304",variable:"color: #4a6a27",brace:"color: #242d55",bracket:"color: #053d39",parameter:"color: #3e414b",parenthesis:"color: #242736"},light_2:{base:"color: darkgrey",wrap_start:"<span style='font-weight: bold'>",wrap_end:"</span>",quote:"color: #454343",number:"color: green",string:"color: #b91db3",function_body:"color: #656565",nan:"color: #8b3c00",null:"color: #1ca89d",boolean:"color: red",comma:"color: #323232",undefined:"color: #9ea41c",scope_container:"color: #286f4f",colon:"color: #363533",namespace:"color: #690900",indent:"color: #0f0211",title:"color: #262304",variable:"color: #4a6a27",brace:"color: #242d55",bracket:"color: #053d39",parameter:"color: #3e414b",parenthesis:"color: #242736"},dark_1:{base:"color: #f1f1f1",quote:"color: #d2d2d2",number:"color: green",string:"color: #e9e9e9",function_body:"color: #a7a7a7",nan:"color: yellow",null:"color: #5bc3ba",boolean:"color: red",comma:"color: #787878",undefined:"color: #e9d234",scope_container:"color: #80ab96",colon:"color: #dfd9b3",namespace:"color: #e05c50",indent:"color: #d9bcdd",title:"color: #f2f2f2",variable:"color: #baeb83",brace:"color: #242d55",bracket:"color: #242d55",parameter:"color: #242d55",parenthesis:"color: #0d1431"},dark_2:{wrap_start:"<span style='font-weight: bold'>",wrap_end:"</span>",base:"color: #f8f8f8",quote:"color: #d2d2d2",number:"color: green",string:"color: #e9e9e9",function_body:"color: #a7a7a7",nan:"color: yellow",null:"color: #5bc3ba",boolean:"color: red",comma:"color: #787878",undefined:"color: #e9d234",scope_container:"color: #80ab96",colon:"color: #dfd9b3",namespace:"color: #e05c50",indent:"color: #d9bcdd",title:"color: #f2f2f2",variable:"color: #baeb83",brace:"color: #242d55",bracket:"color: #242d55",parameter:"color: #242d55",parenthesis:"color: #0d1431"}}},terminal:{denote_line:"\n",denote_tab:"\t",denote_space:" ",wrap_end:"[0m",default_theme:"dark_1",format:function(t,e){return t+e},theme:{light_1:{base:"[0;35m",quote:"[0;34m",number:"[0;32m",string:"[0;35m",function_body:"[0;37m",nan:"[0;33m",null:"[0;36m",boolean:"[0;31m",comma:"[0;37m",undefined:"[0;32m",parenthesis:"[0;36m",bracket:"[0;36m",brace:"[0;36m",colon:"[0;37m",namespace:"[0;31m",indent:"[0;37m",title:"[0;33m",parameter:"[0;34m"},light_2:{base:"[1;35m",quote:"[1;34m",number:"[1;37m",string:"[1;35m",function_body:"[1;37m",nan:"[1;36m",null:"[1;36m",boolean:"[1;31m",comma:"[1;37m",undefined:"[1;36m",parenthesis:"[1;36m",bracket:"[1;36m",brace:"[1;36m",colon:"[1;37m",namespace:"[1;31m",indent:"[1;37m",title:"[1;37m",parameter:"[1;34m"},dark_1:{base:"[0;30m",quote:"[0;32m",number:"[0;32m",string:"[0;35m",function_body:"[0;31m",nan:"[0;33m",null:"[0;36m",boolean:"[0;31m",comma:"[0;30m",undefined:"[0;32m",bracket:"[0;36m",brace:"[0;36m",colon:"[0;30m",namespace:"[0;35m",indent:"[0;50m",title:"[0;34m",parameter:"[0;34m"},dark_2:{base:"[1;30m",quote:"[1;32m",number:"[1;32m",string:"[1;35m",function_body:"[1;30m",nan:"[1;33m",null:"[1;36m",boolean:"[1;31m",comma:"[1;30m",undefined:"[1;32m",bracket:"[1;36m",brace:"[1;36m",colon:"[1;30m",namespace:"[1;35m",indent:"[1;50m",title:"[1;34m",parameter:"[1;34m"}}}}}),define("bracket_print",["./proto_object","./style_map"],function(t,e){var i=function(){var t;if(!(this instanceof(t=i)))return new(Array.prototype.slice.call(arguments).reduce(function(t,e){return t=t.bind(t.prototype,e)},t));this._is_chained=!0,this._platform=null,this._theme=null,this.option(arguments),this._is_chained=!1,this._last_command="space",this._apply_arguments=[],this._plain_index=[],this._has_open=!1,this._formated_index=[],this.formated="",this.plain=""};return i.prototype=t,i.prototype.parent=i,i.prototype.style_map=e,i.prototype._error_option={style:!1,log_title:"Bracket Print Error",character_limit:300},i.prototype._error_platform={denote_line:"\n",denote_tab:"\t",denote_space:" "},i.prototype.setPlatform=function(){if("object"!=typeof this.style_map[this.platform]||null===this.style_map[this.platform]){for(var t=0;this.style_map["_error_platform_"+ ++t];);return this.style_map["_error_platform_"+t]=this._error_platform,new this.parent(this._error_option,{platform:"_error_platform_"+t,level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log_false("The requested platform",this.platform,"is not included in the style mapping or is not a valid Object literal."),delete this.style_map["_error_platform_"+t],!1}return this._platform=this.style_map[this.platform],!0},i.prototype.setTheme=function(){if(!this._platform&&!this.setPlatform())return!1;var t=this.platform;if(this._platform.import_theme_from){if(!(this._platform.import_theme_from in this.style_map))return new this.parent(this._error_option,{level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log_false("The requested import theme",this._platform.import_theme_from,"is not included in the style mapping in platform",t);this._theme=this.style_map[this._platform.import_theme_from].theme,t=this._platform.import_theme_from}else this._theme=this._platform.theme;if("object"!=typeof this._theme)return new this.parent(this._error_option,{level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log_false("The theme",this.theme,"is not found in the platform",t);if(this.theme+"_"+this.level in this._theme)this._theme=this._theme[this.theme+"_"+this.level];else{if(!("default_theme"in this._platform))return new this.parent(this._error_option,{level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log_false("The theme",this._platform.default_theme,"specified is not found in the",t,"style mapping.");if(!(this._platform.default_theme in this._theme))return new this.parent(this._error_option,{level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log_false("The default theme",this._platform.default_theme,"specified is not found in the",t,"style mapping.");this._theme=this._theme[this._platform.default_theme]}return"object"!=typeof this._theme?new this.parent(this._error_option,{level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).log_false("The theme specified is not found in the",t,"style mapping."):this._theme},i.prototype.remove_call=function(){this._platform&&this._platform.format&&this._platform.format.length>=3&&this._apply_arguments.splice.apply(this._apply_arguments,arguments);var t=this._formated_index.splice.apply(this._formated_index,arguments)[0]||0,e=this._plain_index.splice.apply(this._plain_index,arguments)[0]||0;this.formated=this.formated.substr(0,t),this.plain=this.plain.substr(0,e)},i.prototype.getStyleValue=function(t){var e=this.theme+"_"+this.level;return"theme_override"in this._platform&&e in this._platform.theme_override&&this._platform.theme_override[e][t]||this._theme[t]||this._theme.base||!1},i.prototype.append_string=function(t,e){if(this.plain.length===this.character_limit)return!1;if(!arguments.length)return!0;if("string"!=typeof e&&(e=String(e)),!e)return!0;var i=this.character_limit>3*this.truncated_string.length&&this.truncated_string||"";if(this.plain.length+e.length>this.character_limit-i.length&&(e=e.substr(0,this.character_limit-this.plain.length-i.length)+i),this.plain.length>=this.character_limit)return!1;if(this._plain_index.push(this.plain.length),this.plain+=e,this.style){this._formated_index.push(this.formated.length);var n=this.getStyleValue(t);if(!n)return new this.parent(this._error_option,{level:parseInt(this.internal_level)===parseInt(this.internal_level)?parseInt(this.internal_level):this.level}).s("There is not a style value set for",t,"with theme").a(this.theme,"_",this.level).s("in platform",this.platform).log_true();this.formated+=this._platform.format(n,e,this._platform.format.length>=3&&this._apply_arguments||void 0)}else this.formated+=e;return!0},i});